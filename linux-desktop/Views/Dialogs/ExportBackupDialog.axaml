<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:viewmodels="clr-namespace:TwoFactorAuth.ViewModels"
        x:Class="TwoFactorAuth.Views.Dialogs.ExportBackupDialog"
        x:DataType="viewmodels:ExportBackupDialogViewModel"
        Width="550"
        MinWidth="500"
        MaxWidth="700"
        MinHeight="400"
        MaxHeight="800"
        SizeToContent="Height"
        Title="{DynamicResource Lang.Backup.ExportTitle}"
        WindowStartupLocation="CenterOwner"
        CanResize="True">
    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel Margin="24" Spacing="16">
        <TextBlock Text="{DynamicResource Lang.Backup.ExportDescription}" 
                   TextWrapping="Wrap" 
                   Opacity="0.8"/>

        <StackPanel Spacing="8">
            <TextBlock Text="{DynamicResource Lang.Backup.BackupPassword}" FontWeight="SemiBold"/>
            <TextBox Name="PasswordBox" 
                     PasswordChar="•" 
                     Watermark="{DynamicResource Lang.Backup.PasswordWatermark}"/>
            <TextBlock Text="{DynamicResource Lang.Backup.PasswordHint}" 
                       FontSize="11" 
                       Opacity="0.6" 
                       TextWrapping="Wrap"/>
        </StackPanel>

        <StackPanel Spacing="8">
            <TextBlock Text="{DynamicResource Lang.Backup.ConfirmPassword}" FontWeight="SemiBold"/>
            <TextBox Name="ConfirmPasswordBox" 
                     PasswordChar="•" 
                     Watermark="{DynamicResource Lang.Backup.ConfirmPasswordWatermark}"/>
        </StackPanel>

        <StackPanel Spacing="8">
            <TextBlock Text="{DynamicResource Lang.Backup.ExportOptions}" FontWeight="SemiBold"/>
            <CheckBox IsChecked="{Binding IncludeSettings}" 
                      Content="{DynamicResource Lang.Backup.IncludeSettings}"/>
            <CheckBox IsChecked="{Binding IncludeLogs}" 
                      Content="{DynamicResource Lang.Backup.IncludeLogs}"/>
        </StackPanel>

        <Border BorderBrush="{DynamicResource SemiColorWarning}" 
                BorderThickness="1" 
                CornerRadius="6" 
                Padding="12" 
                Background="{DynamicResource SemiColorWarningBackground}">
            <StackPanel Spacing="6">
                <StackPanel Orientation="Horizontal" Spacing="8">
                    <PathIcon Data="M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z" Width="16" Height="16" Foreground="{DynamicResource SemiColorWarning}" VerticalAlignment="Center"/>
                    <TextBlock Text="{DynamicResource Lang.Backup.SecurityWarningTitle}" 
                               FontWeight="SemiBold" 
                               Foreground="{DynamicResource SemiColorWarning}"
                               VerticalAlignment="Center"/>
                </StackPanel>
                <TextBlock Text="{DynamicResource Lang.Backup.SecurityWarning1}" 
                           FontSize="12" 
                           TextWrapping="Wrap"/>
                <TextBlock Text="{DynamicResource Lang.Backup.SecurityWarning2}" 
                           FontSize="12" 
                           TextWrapping="Wrap"/>
                <TextBlock Text="{DynamicResource Lang.Backup.SecurityWarning3}" 
                           FontSize="12" 
                           TextWrapping="Wrap"/>
            </StackPanel>
        </Border>

        <TextBlock Text="{Binding ErrorMessage}" 
                   Foreground="{DynamicResource SemiColorDanger}" 
                   TextWrapping="Wrap" 
                   IsVisible="{Binding ErrorMessage, Converter={x:Static StringConverters.IsNotNullOrEmpty}}"/>

        <WrapPanel Orientation="Horizontal" HorizontalAlignment="Right" Margin="0,8,0,0">
            <Button Content="{DynamicResource Lang.Cancel}" 
                    Click="OnCancelClick" 
                    Margin="0,0,12,0"/>
            <Button Content="{DynamicResource Lang.Backup.Export}" 
                    Click="OnExportClick" 
                    Classes="Primary"/>
        </WrapPanel>
    </StackPanel>
    </ScrollViewer>
</Window>
