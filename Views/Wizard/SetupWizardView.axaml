<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="using:TwoFactorAuth.ViewModels"
             xmlns:views="using:TwoFactorAuth.Views.Wizard"
             xmlns:converters="using:TwoFactorAuth.Converters"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="600"
             x:Class="TwoFactorAuth.Views.Wizard.SetupWizardView"
             x:DataType="vm:SetupWizardViewModel">
    
    <UserControl.Resources>
        <converters:DynamicResourceConverter x:Key="DynamicResourceConverter"/>
    </UserControl.Resources>

    <Grid RowDefinitions="*,Auto" Background="{DynamicResource SemiColorBackground0}">
        <Grid Grid.Row="0">
            <StackPanel Margin="48,48,48,24" HorizontalAlignment="Center" VerticalAlignment="Top">
                <Image Source="avares://TwoFactorAuthDesktop/app.ico" Width="64" Height="64" Margin="0,0,0,16" RenderOptions.BitmapInterpolationMode="HighQuality"/>
                <TextBlock Text="{DynamicResource Lang.Wizard.Welcome}" Classes="H1" FontWeight="Light" FontSize="32" HorizontalAlignment="Center"/>
            </StackPanel>

            <TransitioningContentControl Content="{Binding CurrentStep}" Margin="48,0" VerticalAlignment="Center" HorizontalAlignment="Stretch">
                <TransitioningContentControl.PageTransition>
                    <CrossFade Duration="0:0:0.3" />
                </TransitioningContentControl.PageTransition>
                <TransitioningContentControl.DataTemplates>
                    <DataTemplate DataType="vm:LanguageSelectionViewModel">
                        <views:WizardLanguageView />
                    </DataTemplate>
                    <DataTemplate DataType="vm:ThemeSelectionViewModel">
                        <views:WizardThemeView />
                    </DataTemplate>
                </TransitioningContentControl.DataTemplates>
            </TransitioningContentControl>
        </Grid>

        <Border Grid.Row="1" Padding="24" Background="{DynamicResource SemiColorBackground1}" BorderBrush="{DynamicResource SemiColorBorder}" BorderThickness="0,1,0,0">
            <Grid ColumnDefinitions="*,Auto">
                <StackPanel Orientation="Horizontal" Spacing="8" VerticalAlignment="Center" Opacity="0.5">
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal" Spacing="16">
                    <Button Content="{DynamicResource Lang.Wizard.Back}" 
                            Command="{Binding Back}" 
                            IsVisible="{Binding IsBackVisible}"
                            Theme="{DynamicResource TertiaryButton}"
                            Classes="Large"/>
                    
                    <Button Content="{DynamicResource Lang.Wizard.Next}" 
                            Command="{Binding Next}" 
                            IsVisible="{Binding IsNextVisible}"
                            Theme="{DynamicResource SolidButton}"
                            Classes="Primary Large"/>
                            
                    <Button Content="{DynamicResource Lang.Wizard.Finish}" 
                            Command="{Binding Finish}" 
                            IsVisible="{Binding IsFinishVisible}"
                            Theme="{DynamicResource SolidButton}"
                            Classes="Primary Large"/>
                </StackPanel>
            </Grid>
        </Border>
    </Grid>
</UserControl>
